if(window.DOMParser!==undefined){(function(d){var c=d.prototype,a=c.parseFromString;try{if((new d()).parseFromString("","text/html")){return}}catch(b){}c.parseFromString=function(e,f){if(/^\s*text\/html\s*(?:;|$)/i.test(f)){var g=document.implementation.createHTMLDocument("");if(e.toLowerCase().indexOf("<!doctype")>-1){g.documentElement.innerHTML=e}else{g.body.innerHTML=e}return g}else{return a.apply(this,arguments)}}}(DOMParser))}var html2dom=(function(){var f=0;var b={};var a="";var k;return{parse:h,html2dom:h,strToSrc:o};function h(q,r){var s,t;if(typeof DOMParser=="function"||typeof DOMParser=="object"){t=new DOMParser();s=t.parseFromString(q,"text/html")}else{throw Error("Your JS environment doesn't come with either of the supported parsers (document.createDocumentFragment or DOMParser)")}a="";b={};f=0;k=r;g(s.body);a+="return docFragment;";var p=new Function(a)();return p}function c(r){var p=r.nodeName.replace(/[^a-zA-Z0-9]/g,"");if((r.nodeType==Node.ELEMENT_NODE)&&(r.hasAttribute("id"))){p=r.id.replace(/[^a-zA-Z0-9]/g,"")}p=p.toLowerCase();Object.defineProperty(r,"h2d_nodeID",{configurable:true,writable:true});if(p in b){var q=b[p].length-1;b[p].push(p+"_"+q);r.h2d_nodeID=p+"_"+q}else{b[p]=[p];r.h2d_nodeID=p}}function m(p){return p.replace(/[<>&'"\/]/gi,function(q){return"\\x"+q.charCodeAt(0).toString(16)})}function e(p){return p.replace(/[<>&'"\/]/gi,function(q){return"&#x"+q.charCodeAt(0).toString(16)+";"})}function o(q){var p;if(typeof JSON!="undefined"){p=JSON.stringify(q)}else{p=(q.toSource()).match(/\(new String\((.+)\)\)/)[1]}p=p.replace(/\$\$([^"$]+)\$\$/g,'"+ $1 +"');return p}function j(q,p){if(!("h2d_nodeID" in q)){c(q)}if(p=="SCRIPT"){a+="//XXX CSP will forbid inline JavaScript!\n"}a+=("\nvar "+q.h2d_nodeID+" = document.createElement('"+p+"');\n")}function d(q,p,r){if(p.indexOf("on")===0){a+="//XXX CSP will forbid inline JavaScript and event handlers. Use addEventHandler instead!\n"}else{if(p=="style"){if(typeof k!=="undefined"&&k.indexOf("style!")!==-1){r=e(r);a+=(q.h2d_nodeID+".setAttribute("+o("style")+", "+o(r)+");\n")}else{a+="//XXX CSP will forbid inline styles. Use ``"+q.h2d_nodeID+".style'' instead of setAttribute.\n"}}else{if(typeof k!=="undefined"&&k.indexOf(p)!==-1){a+=(q.h2d_nodeID+".setAttribute("+o(p)+", "+o(r)+");\n")}else{r=e(r);a+=(q.h2d_nodeID+".setAttribute("+o(p)+", "+o(r)+");\n")}}}}function i(p,q){if(!("h2d_nodeID" in p)){c(p)}a+=("var "+p.h2d_nodeID+" = document.createTextNode("+o(q)+");\n")}function l(q,p){if(!("h2d_nodeID" in q)){c(q)}a+=("var "+q.h2d_nodeID+" = document.createComment("+o(p)+");\n")}function n(p,q){a+=(p+".appendChild("+q.h2d_nodeID+");\n")}function g(u){var w=document.createNodeIterator(u,NodeFilter.SHOW_ALL,null,false);var q;while(q=w.nextNode()){var s=q+", name: "+q.nodeName+", type: "+q.nodeType;if(q.nodeValue!=null){s+=", value:"+o(q.nodeValue)}if(q==u){if(a.indexOf("docFragment")!==0){a+="var docFragment = document.createDocumentFragment(); // contains all gathered nodes\n";Object.defineProperty(q,"h2d_nodeID",{configurable:true,writable:true});q.h2d_nodeID="docFragment";continue}}else{var r=q.parentNode.h2d_nodeID}if(q.nodeType==Node.ELEMENT_NODE){j(q,q.nodeName);for(var t=0;t<q.attributes.length;t++){var x=q.attributes[t].name;var y=q.attributes[t].value;d(q,x,y)}if(r!==undefined){n(r,q)}}else{if(q.nodeType==Node.TEXT_NODE){if(/\S/.test(q.textContent)){var p=q.textContent.replace(/\s+/," ");i(q,p);if(r!==undefined){n(r,q)}}}else{if(q.nodeType==Node.COMMENT_NODE){l(q,q.nodeValue);if(r!==undefined){n(r,q)}}else{console.log("Unknown Node Type: "+s)}}}}}})();